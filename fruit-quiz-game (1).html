<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üçì Fruit Quiz Game</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0f1923;
    --card: #1a2840;
    --accent: #ff6b35;
    --green: #22c55e;
    --red: #ef4444;
    --yellow: #fbbf24;
    --text: #f0f4ff;
    --muted: #8899bb;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Nunito', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  body::before {
    content: '';
    position: fixed; inset: 0;
    background: radial-gradient(ellipse at 20% 50%, #1a3a5c33 0%, transparent 60%),
                radial-gradient(ellipse at 80% 20%, #3d1a5c33 0%, transparent 60%);
    pointer-events: none;
  }

  #app {
    width: 100%; max-width: 580px;
    padding: 16px;
    position: relative;
    z-index: 1;
  }

  .screen { display: none; animation: fadeIn .4s ease; }
  .screen.active { display: block; }

  @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

  /* START SCREEN */
  .start-card {
    background: var(--card); border-radius: 24px; padding: 48px 36px;
    text-align: center; border: 1px solid #2a3f5f;
    box-shadow: 0 24px 80px #00000066;
  }

  .game-title {
    font-family: 'Fredoka One', sans-serif; font-size: 3rem;
    background: linear-gradient(135deg, #ff6b35, #fbbf24, #22c55e);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    background-clip: text; line-height: 1.1; margin-bottom: 8px;
  }

  .subtitle { color: var(--muted); font-size: 1.1rem; margin-bottom: 36px; }

  .rules {
    background: #0f1923; border-radius: 16px; padding: 20px;
    margin-bottom: 32px; text-align: left;
  }
  .rules h3 { color: var(--yellow); font-size: .85rem; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 12px; }
  .rule-item { display: flex; align-items: center; gap: 10px; padding: 6px 0; font-size: .95rem; color: #c0d0ee; }
  .rule-icon { font-size: 1.2rem; width: 28px; text-align: center; flex-shrink: 0; }

  .btn-start {
    background: linear-gradient(135deg, #ff6b35, #ff8c5a);
    border: none; border-radius: 50px; padding: 16px 48px;
    font-family: 'Fredoka One', sans-serif; font-size: 1.3rem;
    color: white; cursor: pointer; transition: transform .15s, box-shadow .15s;
    box-shadow: 0 8px 30px #ff6b3555;
  }
  .btn-start:hover { transform: translateY(-2px); box-shadow: 0 12px 40px #ff6b3580; }

  /* GAME HUD */
  .hud { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
  .progress-label { font-family: 'Fredoka One', sans-serif; font-size: 1.1rem; color: var(--muted); }
  .progress-label span { color: var(--text); }
  .stats-row { display: flex; gap: 10px; }
  .stat-badge {
    display: flex; align-items: center; gap: 5px;
    background: #0f1923; border-radius: 20px; padding: 5px 12px;
    font-weight: 700; font-size: .9rem;
  }
  .stat-badge.correct { color: var(--green); }
  .stat-badge.wrong   { color: var(--red); }

  /* GLOBAL TIMER */
  .global-timer-wrap { margin-bottom: 14px; }
  .global-timer-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
  .timer-label { font-size: .8rem; color: var(--muted); text-transform: uppercase; letter-spacing: 1.5px; font-weight: 700; }
  .timer-countdown {
    font-family: 'Fredoka One', sans-serif; font-size: 1.5rem;
    color: var(--text); transition: color .3s;
  }
  .timer-bar-track {
    background: #0f1923; border-radius: 10px; height: 12px;
    overflow: hidden; border: 1px solid #2a3f5f;
  }
  .timer-bar-fill {
    height: 100%; border-radius: 10px;
    background: linear-gradient(90deg, #22c55e, #4ade80);
    transition: width 1s linear;
  }

  /* QUESTION PROGRESS */
  .progress-bar-wrap { background: #0f1923; border-radius: 8px; height: 5px; margin-bottom: 16px; overflow: hidden; }
  .progress-bar { height: 100%; background: linear-gradient(90deg, #6366f1, #a78bfa); border-radius: 8px; transition: width .4s ease; }

  /* FRUIT CARD */
  .fruit-card {
    background: var(--card); border-radius: 24px; padding: 24px 28px;
    border: 1px solid #2a3f5f; box-shadow: 0 16px 60px #00000044; margin-bottom: 12px;
  }
  .fruit-emoji-display {
    font-size: 6.5rem; text-align: center; line-height: 1; margin-bottom: 6px;
    filter: drop-shadow(0 8px 16px #00000055); animation: bounce .5s ease;
  }
  @keyframes bounce {
    0%   { transform: scale(0.4); opacity: 0; }
    70%  { transform: scale(1.1); }
    100% { transform: scale(1);   opacity: 1; }
  }
  .question-text { text-align: center; font-size: 1.1rem; font-weight: 700; color: var(--muted); margin-bottom: 18px; }

  /* ANSWERS */
  .answers { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
  .answer-btn {
    background: #0f1923; border: 2px solid #2a3f5f; border-radius: 14px;
    padding: 14px 10px; font-family: 'Nunito', sans-serif; font-size: .95rem;
    font-weight: 700; color: var(--text); cursor: pointer; transition: all .15s; text-align: center;
  }
  .answer-btn:hover:not(:disabled) { border-color: var(--accent); background: #1a2840; transform: translateY(-1px); }
  .answer-btn.correct-ans { background: #052e16; border-color: var(--green); color: var(--green); animation: pulse-green .3s ease; }
  .answer-btn.wrong-ans   { background: #450a0a; border-color: var(--red);   color: var(--red);   animation: shake .3s ease; }

  @keyframes pulse-green { 0%{transform:scale(1)} 50%{transform:scale(1.04)} 100%{transform:scale(1)} }
  @keyframes shake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-6px)} 75%{transform:translateX(6px)} }

  /* PENALTY TOAST */
  .penalty-toast {
    position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
    background: var(--red); color: white; padding: 10px 24px; border-radius: 50px;
    font-family: 'Fredoka One', sans-serif; font-size: 1.1rem; z-index: 999;
    animation: toastIn .3s ease, toastOut .3s ease 1.2s forwards; pointer-events: none;
  }
  @keyframes toastIn  { from{opacity:0;top:0}  to{opacity:1;top:20px} }
  @keyframes toastOut { to{opacity:0;top:0} }

  /* TIMEOUT FLASH */
  .timeout-flash {
    position: fixed; inset: 0; background: #ef444422; pointer-events: none;
    animation: flashRed .5s ease; z-index: 998;
  }
  @keyframes flashRed { from{opacity:1} to{opacity:0} }

  /* URGENT PULSE */
  @keyframes urgentPulse { 0%,100%{transform:scale(1)} 50%{transform:scale(1.1)} }
  .timer-urgent { animation: urgentPulse .5s ease infinite; color: var(--red) !important; }

  /* END SCREEN */
  .end-card {
    background: var(--card); border-radius: 24px; padding: 40px 32px;
    text-align: center; border: 1px solid #2a3f5f; box-shadow: 0 24px 80px #00000066;
  }
  .trophy { font-size: 4rem; margin-bottom: 8px; animation: pop .5s ease .1s both; }
  @keyframes pop { from{transform:scale(0);opacity:0} to{transform:scale(1);opacity:1} }
  .end-title { font-family: 'Fredoka One', sans-serif; font-size: 2rem; margin-bottom: 4px; }
  .final-score {
    font-family: 'Fredoka One', sans-serif; font-size: 3.5rem;
    background: linear-gradient(135deg, #fbbf24, #ff6b35);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    background-clip: text; margin: 12px 0;
  }
  .stats-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin: 20px 0 12px; }
  .stats-grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px; }
  .stat-box { background: #0f1923; border-radius: 16px; padding: 16px 8px; }
  .stat-box-val { font-family: 'Fredoka One', sans-serif; font-size: 2rem; display: block; }
  .stat-box-val.g { color: var(--green); }
  .stat-box-val.r { color: var(--red); }
  .stat-box-val.y { color: var(--yellow); }
  .stat-box-val.p { color: #a78bfa; }
  .stat-box-val.b { color: #38bdf8; }
  .stat-box-label { font-size: .8rem; color: var(--muted); }
  .message { color: var(--muted); font-size: 1rem; margin-bottom: 4px; }

  .btn-play-again {
    background: linear-gradient(135deg, #22c55e, #16a34a); border: none; border-radius: 50px;
    padding: 16px 48px; font-family: 'Fredoka One', sans-serif; font-size: 1.2rem;
    color: white; cursor: pointer; transition: transform .15s, box-shadow .15s;
    box-shadow: 0 8px 30px #22c55e44;
  }
  .btn-play-again:hover { transform: translateY(-2px); box-shadow: 0 12px 40px #22c55e66; }
</style>
</head>
<body>
<div id="app">

  <!-- START SCREEN -->
  <div id="screen-start" class="screen active">
    <div class="start-card">
      <div class="game-title">üçâ Fruit Quiz</div>
      <div class="subtitle">Test your fruit knowledge!</div>
      <div class="rules">
        <h3>üìã How to Play</h3>
        <div class="rule-item"><span class="rule-icon">üñºÔ∏è</span> Identify 20 different fruits</div>
        <div class="rule-item"><span class="rule-icon">‚è±Ô∏è</span> 60 seconds for the <strong>entire game</strong></div>
        <div class="rule-item"><span class="rule-icon">‚ùå</span> Wrong answer = ‚àí1 second penalty</div>
        <div class="rule-item"><span class="rule-icon">‚ö°</span> The timer never pauses ‚Äî stay sharp!</div>
        <div class="rule-item"><span class="rule-icon">üìä</span> Full statistics at the end</div>
      </div>
      <button class="btn-start" onclick="startGame()">Start Game üöÄ</button>
    </div>
  </div>

  <!-- GAME SCREEN -->
  <div id="screen-game" class="screen">
    <div class="hud">
      <div class="progress-label">Fruit <span id="q-num">1</span> / 20</div>
      <div class="stats-row">
        <div class="stat-badge correct">‚úì <span id="live-correct">0</span></div>
        <div class="stat-badge wrong">‚úó <span id="live-wrong">0</span></div>
      </div>
    </div>

    <!-- Single global timer -->
    <div class="global-timer-wrap">
      <div class="global-timer-row">
        <span class="timer-label">‚è± Game Timer</span>
        <span class="timer-countdown" id="timer-countdown">1:00</span>
      </div>
      <div class="timer-bar-track">
        <div class="timer-bar-fill" id="timer-bar-fill" style="width:100%"></div>
      </div>
    </div>

    <!-- Question progress -->
    <div class="progress-bar-wrap">
      <div class="progress-bar" id="progress-bar" style="width:5%"></div>
    </div>

    <div class="fruit-card">
      <div class="fruit-emoji-display" id="fruit-emoji">üçé</div>
      <div class="question-text">What fruit is this?</div>
      <div class="answers" id="answers"></div>
    </div>
  </div>

  <!-- END SCREEN -->
  <div id="screen-end" class="screen">
    <div class="end-card">
      <div class="trophy" id="trophy-emoji">üèÜ</div>
      <div class="end-title" id="end-title">Quiz Complete!</div>
      <div class="message" id="end-message">Here are your results:</div>
      <div class="final-score" id="final-score">0 pts</div>
      <div class="stats-grid">
        <div class="stat-box">
          <span class="stat-box-val g" id="end-correct">0</span>
          <div class="stat-box-label">Correct</div>
        </div>
        <div class="stat-box">
          <span class="stat-box-val r" id="end-wrong">0</span>
          <div class="stat-box-label">Wrong</div>
        </div>
        <div class="stat-box">
          <span class="stat-box-val y" id="end-accuracy">0%</span>
          <div class="stat-box-label">Accuracy</div>
        </div>
      </div>
      <div class="stats-grid-2">
        <div class="stat-box">
          <span class="stat-box-val p" id="end-timeused">0s</span>
          <div class="stat-box-label">Time Used</div>
        </div>
        <div class="stat-box">
          <span class="stat-box-val b" id="end-timeleft">0s</span>
          <div class="stat-box-label">Time Left</div>
        </div>
      </div>
      <button class="btn-play-again" onclick="startGame()">Play Again üîÑ</button>
    </div>
  </div>

</div>

<script>
const TOTAL_TIME = 60; // seconds for the whole game

const FRUITS_LIST = [
  { name: "Apple",       emoji: "üçé" },
  { name: "Banana",      emoji: "üçå" },
  { name: "Grapes",      emoji: "üçá" },
  { name: "Watermelon",  emoji: "üçâ" },
  { name: "Strawberry",  emoji: "üçì" },
  { name: "Peach",       emoji: "üçë" },
  { name: "Pineapple",   emoji: "üçç" },
  { name: "Mango",       emoji: "ü•≠" },
  { name: "Lemon",       emoji: "üçã" },
  { name: "Orange",      emoji: "üçä" },
  { name: "Cherry",      emoji: "üçí" },
  { name: "Blueberry",   emoji: "ü´ê" },
  { name: "Coconut",     emoji: "ü••" },
  { name: "Kiwi",        emoji: "ü•ù" },
  { name: "Pear",        emoji: "üçê" },
  { name: "Melon",       emoji: "üçà" },
  { name: "Avocado",     emoji: "ü•ë" },
  { name: "Tomato",      emoji: "üçÖ" },
  { name: "Chestnut",    emoji: "üå∞" },
  { name: "Green Apple", emoji: "üçè" },
];

let questions = [];
let currentQ = 0;
let correctCount = 0;
let wrongCount = 0;
let timeLeft = TOTAL_TIME;
let timerInterval = null;
let answered = false;

function shuffle(arr) { return [...arr].sort(() => Math.random() - 0.5); }

function buildQuestions() {
  return shuffle(FRUITS_LIST).map(fruit => {
    const wrongs = shuffle(FRUITS_LIST.filter(f => f.name !== fruit.name)).slice(0, 3);
    return { fruit, options: shuffle([fruit, ...wrongs]) };
  });
}

function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function startGame() {
  questions = buildQuestions();
  currentQ = 0;
  correctCount = 0;
  wrongCount = 0;
  timeLeft = TOTAL_TIME;
  clearInterval(timerInterval);
  showScreen('screen-game');
  updateTimerUI();
  loadQuestion();

  // Start single global timer
  timerInterval = setInterval(() => {
    timeLeft--;
    updateTimerUI();
    if (timeLeft <= 0) {
      timeLeft = 0;
      updateTimerUI();
      clearInterval(timerInterval);
      triggerGameOver();
    }
  }, 1000);
}

function updateTimerUI() {
  const mins = Math.floor(timeLeft / 60);
  const secs = timeLeft % 60;
  const display = mins + ':' + String(secs).padStart(2, '0');

  const countdown = document.getElementById('timer-countdown');
  countdown.textContent = display;

  if (timeLeft <= 15) {
    countdown.style.color = '#ef4444';
    countdown.classList.add('timer-urgent');
  } else if (timeLeft <= 30) {
    countdown.style.color = '#fbbf24';
    countdown.classList.remove('timer-urgent');
  } else {
    countdown.style.color = 'var(--text)';
    countdown.classList.remove('timer-urgent');
  }

  const pct = (timeLeft / TOTAL_TIME) * 100;
  const fill = document.getElementById('timer-bar-fill');
  if (fill) {
    fill.style.width = pct + '%';
    if (pct > 50)      fill.style.background = 'linear-gradient(90deg,#22c55e,#4ade80)';
    else if (pct > 25) fill.style.background = 'linear-gradient(90deg,#fbbf24,#f59e0b)';
    else               fill.style.background = 'linear-gradient(90deg,#ef4444,#f97316)';
  }
}

function loadQuestion() {
  if (currentQ >= questions.length) { clearInterval(timerInterval); endGame(); return; }

  answered = false;
  const { fruit, options } = questions[currentQ];

  document.getElementById('q-num').textContent = currentQ + 1;
  document.getElementById('progress-bar').style.width = ((currentQ + 1) / 20 * 100) + '%';
  document.getElementById('fruit-emoji').textContent = fruit.emoji;
  document.getElementById('live-correct').textContent = correctCount;
  document.getElementById('live-wrong').textContent = wrongCount;

  const answersEl = document.getElementById('answers');
  answersEl.innerHTML = '';
  options.forEach(opt => {
    const btn = document.createElement('button');
    btn.className = 'answer-btn';
    btn.textContent = opt.name;
    btn.onclick = () => selectAnswer(btn, opt.name, fruit.name);
    answersEl.appendChild(btn);
  });
}

function selectAnswer(btn, selected, correct) {
  if (answered) return;
  answered = true;

  document.querySelectorAll('.answer-btn').forEach(b => {
    b.disabled = true;
    if (b.textContent === correct) b.classList.add('correct-ans');
  });

  if (selected === correct) {
    correctCount++;
  } else {
    btn.classList.add('wrong-ans');
    wrongCount++;
    timeLeft = Math.max(0, timeLeft - 1);
    updateTimerUI();
    showPenalty();
  }

  document.getElementById('live-correct').textContent = correctCount;
  document.getElementById('live-wrong').textContent = wrongCount;

  setTimeout(() => {
    currentQ++;
    loadQuestion();
  }, 900);
}

function showPenalty() {
  document.querySelectorAll('.penalty-toast').forEach(e => e.remove());
  const toast = document.createElement('div');
  toast.className = 'penalty-toast';
  toast.textContent = '‚è±Ô∏è ‚àí1 Second Penalty!';
  document.body.appendChild(toast);
  setTimeout(() => toast.remove(), 1600);
}

function triggerGameOver() {
  answered = true;
  const flash = document.createElement('div');
  flash.className = 'timeout-flash';
  document.body.appendChild(flash);
  setTimeout(() => flash.remove(), 500);
  setTimeout(() => endGame(), 700);
}

function endGame() {
  clearInterval(timerInterval);
  const unanswered = Math.max(0, questions.length - currentQ);
  const totalWrong = wrongCount + unanswered;
  const total = correctCount + totalWrong;
  const accuracy = total > 0 ? Math.round(correctCount / total * 100) : 0;
  const score = Math.max(0, correctCount * 100 - wrongCount * 30);
  const timeUsed = TOTAL_TIME - timeLeft;

  let trophy = 'üçé', title = 'Keep Learning!', msg = 'Study more fruits!';
  if (accuracy >= 90)      { trophy = 'ü•á'; title = 'Fruit Master!'; msg = 'Absolutely incredible!'; }
  else if (accuracy >= 70) { trophy = 'ü•à'; title = 'Well Done!';    msg = 'You know your fruits!'; }
  else if (accuracy >= 50) { trophy = 'ü•â'; title = 'Good Try!';     msg = 'Practice makes perfect!'; }

  document.getElementById('trophy-emoji').textContent  = trophy;
  document.getElementById('end-title').textContent     = title;
  document.getElementById('end-message').textContent   = msg;
  document.getElementById('final-score').textContent   = score + ' pts';
  document.getElementById('end-correct').textContent   = correctCount;
  document.getElementById('end-wrong').textContent     = totalWrong;
  document.getElementById('end-accuracy').textContent  = accuracy + '%';
  document.getElementById('end-timeused').textContent  = timeUsed + 's';
  document.getElementById('end-timeleft').textContent  = timeLeft + 's';

  showScreen('screen-end');
}
</script>
</body>
</html>
